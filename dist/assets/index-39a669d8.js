(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode(".text-interface{padding-left:1em;padding-right:1em;width:100%;height:100%;--offwhite: #aaa;--grey: #888;--black: #222;--white: #fefefe;background-color:var(--black);color:var(--white);position:sticky;top:0;max-height:90vh;overflow-y:scroll;margin-right:auto;margin-left:auto;max-width:28em;min-width:20em;font-family:Roboto,sans-serif}.text-interface h2{position:sticky;top:0;background-color:var(--black);margin:0;padding-top:1em;padding-bottom:1em;border-bottom:1px dotted var(--grey)}.text-interface .input-wrap{border:1px dotted var(--grey);padding:1em;margin-top:1em;margin-bottom:1em;opacity:.1}.text-interface .input-wrap.active{opacity:1}.text-interface .placeholder{font-style:italic;color:var(--offwhite)}.output img{margin:1em;max-width:80%;animation:fade-in .5s}@keyframes fade-in{0%{opacity:0;transform:scale(0);transform-origin:top left}to{opacity:1;transform:scale(1)}}")),document.head.appendChild(r)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const a=["yes","yeah","yep","yup","true","t","y","aye","yup"],l=["no","n","false","f","nope","nah"];class h{constructor(t=document.body,e="Text Interface"){this.listener=null,this.outputAnimationLength=800,this.outputDelay=300,this.shouldStealFocus=!1,this.outputQueue=[],this.div=document.createElement("div"),this.div.classList.add("text-interface"),t.appendChild(this.div),this.div.innerHTML=`
      <h2 class="ti-title">${e}</h2>
      <div class="output">
      </div>
      <div class="input-wrap">
          <div 
             class="input" 
             contenteditable 
             placeholder="Type here...">
          </div>
          <div class="placeholder">Type and hit return...</div>
      </div>
    `,this.inputWrap=this.div.querySelector(".input-wrap"),this.inputEl=this.div.querySelector(".input"),this.outputEl=this.div.querySelector(".output"),this.placeholderEl=this.div.querySelector(".placeholder"),this.setupInputListener(),this.shouldStealFocus&&this.inputEl.focus()}setTitle(t){this.div.querySelector(".ti-title").textContent=t}clear(){this.outputEl.innerHTML=""}async readChoice(t,e="Choose one of the following:",s="You must choose one of the options!"){this.output(e);for(let o=0;o<t.length;o++)this.output(`${o+1}. ${t[o]}`);let i=await this.readText();if(t.indexOf(i)>-1)return i;if(i=i.replace(/\D/g,""),i!=""){let o=Number(i);if(!isNaN(o)&&o<=t.length&&o>0)return t[Math.floor(o)-1]}return this.output(s),await this.readChoice(t,e,s)}async readYesOrNo(t="Say yes or no!"){let e=await this.readText();return e=e.toLowerCase(),e=e.replace(/\s+/,""),a.indexOf(e)>-1?!0:l.indexOf(e)>-1?!1:(this.output(t),await this.readYesOrNo(t))}async readNumber(t="Please type a number"){let e=await this.readText(),s=Number(e);return isNaN(s)?(this.output(t),this.readNumber(t)):s}readText(){return this.shouldStealFocus&&this.inputEl.focus(),this.inputWrap.classList.add("active"),this.inputWrap.scrollIntoView(),new Promise((t,e)=>{this.listener=t})}showElement(t){this.outputting?this.outputQueue.push(["element",t]):(this.outputting=!0,this.outputEl.appendChild(t),t.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{this.outputting=!1,this.doNextOutput()},this.outputDelay))}showHTML(t){let e=document.createElement("div");e.innerHTML=t,this.showElement(e)}showImage(t,e="An image"){let s=document.createElement("img");s.setAttribute("src",t),s.setAttribute("alt",e),this.showElement(s)}output(t,e=!1){if(t=""+t,this.outputting)this.outputQueue.push(["text",t,e]);else{let s=document.createElement("div");if(s.classList.add("output"),e&&s.classList.add("echo"),!this.outputAnimationLength||e)s.textContent=t;else{this.outputting=!0;let i=this.outputAnimationLength/t.length;const o=()=>{s.textContent+=t[0]||"",t=t.substring(1),t.length?setTimeout(o,i):(this.outputting=!1,this.doNextOutput())};setTimeout(o,this.outputDelay)}this.outputEl.appendChild(s),s.scrollIntoView({behavior:"smooth"})}}doNextOutput(){if(this.outputQueue.length){let t=this.outputQueue[0];this.outputQueue=this.outputQueue.slice(1);let e=t[0],s=t.slice(1);e=="text"?this.output(...s):this.showElement(...s)}}setupInputListener(){this.inputEl.addEventListener("keypress",t=>{if(t.code=="Enter"){let e=this.inputEl.textContent.replace(/\n$/,"");this.output(e,!0),this.listener&&(this.listener(e),this.listener=null),this.inputWrap.classList.remove("active"),setTimeout(()=>{this.inputEl.textContent=""},1)}}),this.placeholderEl.addEventListener("click",()=>this.inputEl.focus())}}let p=document.querySelector("#app"),n=new h(p,"Example Text Interface");n.output("What is your name?");let c=await n.readText();await n.output("Hello, "+c);await n.output("Here is a pretty mountain:");await n.showImage("https://upload.wikimedia.org/wikipedia/commons/e/e7/Everest_North_Face_toward_Base_Camp_Tibet_Luca_Galuzzi_2006.jpg");await n.readText();
